<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>main.html</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <script type="text/javascript" src="../../js/jquery-1.8.3.min.js"></script>

    <style type="text/css">
	  	body,h1{
			margin: 0px;
			padding: 0px;
		}
	  	
	  	.hide{
	  		display: none;
	  	
	  	}
	  	.title {
			font-size: 18px;
			color: #1A3347;
			background-color: #95BFE0;
			font-weight: normal;
			font-size: 14px;
			line-height: 30px;
			height: 30px;
		}
		button{
			margin-left: 50px;
		}
		.lft{
			margin-top: 20px;
			margin-left: 30px;
		}
    </style>
   <script type="text/javascript">
   	$(function(){
   		//全选/取消效果
   		levelOne();
   		levelTwo();
   		changeRole();
   	});
   	
   	//一级菜单checkbox绑定全选/取消
   	function levelOne()
   	{
   		$("span>input[type='checkbox']").click(function(){
   			//alert(123);
   			//alert($(this).attr("checked"));
   			if($(this).attr("checked") == "checked")
   			{
   				$(this).parent().siblings().find(":checkbox").attr("checked",$(this).attr("checked"));
   			}
   			else
   			{
   				$(this).parent().siblings().find(":checkbox").removeAttr("checked");
   			}
   			
   		});
   	}
   	
   	//二级菜单checkbox绑定全选/取消
   	function levelTwo()
   	{
   		//$("input[name='checkedMenu']")
   		$("li[class='menu-sub']>input[type='checkbox']").click(function(){
   			//
   			var checkboxNum = $(this).parent().parent().find(":checkbox").length;
   			var checkedNum = $(this).parent().parent().find(":checkbox:checked").length;
   			if(checkboxNum == checkedNum)
   			{
   				$(this).parent().parent().prev().find(":checkbox").attr("checked","checked");
   			}
   			else
   			{
   				//checkbox->li---->ul---->span--->span下的checkbox
   				$(this).parent().parent().prev().find(":checkbox").removeAttr("checked");
   			}
   			
   		});
   	}
   	
   	function changeRole()
   	{
   		var roleID = $("#roleID").val();
   		$(":checkbox").removeAttr("checked");
   		if(roleID==1)
   		{
   			$(":checkbox").attr("checked",true);
   		}
   		else if(roleID==2)
   		{
   			$("#menu_6").attr("checked",true);
   			$("#menu_7").attr("checked",true);
   			$("#menu_12").attr("checked",true);
   			$("#menu_13").attr("checked",true);
   		}
   		
   	}
   	
   </script> 
    
   
  </head>
  
  <body>
  	<div id = "mainDiv">
	  	
	    <h1 class="title">首页  &gt;&gt;权限变更 </h1>
	    
	    <div id = "contentDiv">
	    	<div id = "content-left" class="lft">
	    		选择角色:
	    		<select id="roleID" onchange="changeRole()">
	    			<option value="1">管理员</option>
	    			<option value="2">普通用户</option>
	    			<option value="3">总经理</option>
	    			<option value="4">财务</option>
	    		</select>
	    		
	    		<ul>
	    		
	    			<li >
	    				<span>人事管理<input type="checkbox"></span>
	    				<ul >
	    					<li class="menu-sub">部门管理<input id="menu_4" value="4" name="checkedMenu" type="checkbox"></li>
	    					<li class="menu-sub">员工管理<input id="menu_5" value="5" name="checkedMenu" type="checkbox"></li>
	    					<li class="menu-sub">请假管理<input id="menu_6" value="6" name="checkedMenu" type="checkbox"></li>
	    				</ul>
	    			
	    			</li>
	    			
	    			<li class="menu">
	    				<span>财务管理<input type="checkbox"></span>
	    				<ul>
	    					<li class="menu-sub">报销管理<input id="menu_7" value="7" name="checkedMenu" type="checkbox"></li>
	    					<li class="menu-sub">报销统计<input id="menu_8" value="8" name="checkedMenu" type="checkbox"></li>
	    				</ul>
	    			
	    			</li>	    			
	    		    <li class="menu">
	    				<span>系统管理<input type="checkbox"></span>
	    				<ul >
	    					<li class="menu-sub">账户维护<input id="menu_9" value="9" name="checkedMenu" type="checkbox"></li>
	    					<li class="menu-sub">角色管理<input id="menu_10" value="10" name="checkedMenu" type="checkbox"></li>
	    					<li class="menu-sub">权限管理<input id="menu_11" value="11" name="checkedMenu" type="checkbox"></li>
	    					<li class="menu-sub">密码重置<input id="menu_12" value="12" name="checkedMenu" type="checkbox"></li>
	    					<li class="menu-sub">系统退出<input id="menu_13" value="13" name="checkedMenu" type="checkbox"></li>
	    				</ul>
	    			
	    			</li>

	    		</ul>
	    		
	    		<button>提交变更</button>
	    	</div>
	    	
	    	
	    </div>
	    
  	
  	</div>
   
  </body>
</html>
